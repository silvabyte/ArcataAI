{"id":"lint-10k","title":"Create JwksProvider.scala - fetch and parse JWKS public keys","description":"Create a new JwksProvider class that:\n- Fetches JWKS from Supabase endpoint\n- Parses EC public keys from JWK format (P-256 curve)\n- No caching - fetch fresh on each validation (KISS)\n- Returns Either[JwksError, ECPublicKey]","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T14:15:06.723223148-05:00","updated_at":"2025-12-29T14:17:05.704984351-05:00","closed_at":"2025-12-29T14:17:05.704984351-05:00","labels":["auth"],"dependencies":[{"issue_id":"lint-10k","depends_on_id":"lint-5qv","type":"parent-child","created_at":"2025-12-29T14:15:37.455873711-05:00","created_by":"daemon"}],"comments":[{"id":1,"issue_id":"lint-10k","author":"matsilva","text":"Starting implementation of JwksProvider.scala","created_at":"2025-12-29T19:16:38Z"}]}
{"id":"lint-1if","title":"Update .env.example - remove SUPABASE_JWT_SECRET","description":"Remove SUPABASE_JWT_SECRET from .env.example and add comment explaining JWKS is used instead","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-29T14:15:06.781120077-05:00","updated_at":"2025-12-29T14:18:59.800299343-05:00","closed_at":"2025-12-29T14:18:59.800299343-05:00","labels":["auth"],"dependencies":[{"issue_id":"lint-1if","depends_on_id":"lint-5qv","type":"parent-child","created_at":"2025-12-29T14:15:37.505961995-05:00","created_by":"daemon"}],"comments":[{"id":6,"issue_id":"lint-1if","author":"matsilva","text":"Starting - updating .env.example","created_at":"2025-12-29T19:18:44Z"}]}
{"id":"lint-3dt","title":"Update AuthConfig.scala - use JwksProvider instead of JWT secret","description":"Update AuthConfig to:\n- Derive JWKS URL from SUPABASE_URL\n- Create JwksProvider instance\n- Remove SUPABASE_JWT_SECRET dependency","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T14:15:06.74758565-05:00","updated_at":"2025-12-29T14:17:54.354005211-05:00","closed_at":"2025-12-29T14:17:54.354005211-05:00","labels":["auth"],"dependencies":[{"issue_id":"lint-3dt","depends_on_id":"lint-10k","type":"blocks","created_at":"2025-12-29T14:15:24.178425024-05:00","created_by":"daemon"},{"issue_id":"lint-3dt","depends_on_id":"lint-xco","type":"blocks","created_at":"2025-12-29T14:15:24.188680062-05:00","created_by":"daemon"},{"issue_id":"lint-3dt","depends_on_id":"lint-5qv","type":"parent-child","created_at":"2025-12-29T14:15:37.476583236-05:00","created_by":"daemon"}],"comments":[{"id":3,"issue_id":"lint-3dt","author":"matsilva","text":"Starting - updating AuthConfig to use JwksProvider","created_at":"2025-12-29T19:17:34Z"}]}
{"id":"lint-3tz","title":"Rewrite JwtValidatorSuite.scala - test with mocked EC keys","description":"Rewrite tests to:\n- Generate test EC key pair (P-256)\n- Create mock JwksProvider returning test key\n- Test ES256 validation, expired tokens, unknown kid, 503 on JWKS failure\n- Test rejection of HS256 tokens","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T14:15:06.792005905-05:00","updated_at":"2025-12-29T14:19:36.215988025-05:00","closed_at":"2025-12-29T14:19:36.215988025-05:00","labels":["auth","test"],"dependencies":[{"issue_id":"lint-3tz","depends_on_id":"lint-10k","type":"blocks","created_at":"2025-12-29T14:15:24.208118437-05:00","created_by":"daemon"},{"issue_id":"lint-3tz","depends_on_id":"lint-xco","type":"blocks","created_at":"2025-12-29T14:15:24.216621827-05:00","created_by":"daemon"},{"issue_id":"lint-3tz","depends_on_id":"lint-5qv","type":"parent-child","created_at":"2025-12-29T14:15:37.51590814-05:00","created_by":"daemon"}],"comments":[{"id":7,"issue_id":"lint-3tz","author":"matsilva","text":"Starting - rewriting JwtValidatorSuite with mocked EC keys","created_at":"2025-12-29T19:18:59Z"}]}
{"id":"lint-5qv","title":"Update API auth layer to use JWKS-based JWT validation (ES256)","description":"Replace legacy HS256 shared-secret JWT validation with JWKS-based ES256 validation. This removes dependency on SUPABASE_JWT_SECRET and uses Supabase's public key endpoint instead.\n\n## Requirements\n- Fetch public keys from Supabase JWKS endpoint\n- Validate ES256 tokens using fetched public keys  \n- Return 503 when JWKS endpoint is unreachable\n- Remove all legacy HS256/SUPABASE_JWT_SECRET code\n- No backwards compatibility - clean cut to new approach\n\nJWKS endpoint: https://ffhazvcgqrjhiicdxhej.supabase.co/auth/v1/.well-known/jwks.json","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T14:14:47.337383469-05:00","updated_at":"2025-12-29T14:24:20.500202624-05:00","closed_at":"2025-12-29T14:24:20.500202624-05:00","labels":["auth","security"]}
{"id":"lint-70d","title":"Update AuthenticatedDecoratorSuite.scala - remove JWT secret references","description":"Remove all references to SUPABASE_JWT_SECRET from decorator tests","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T14:15:06.802805085-05:00","updated_at":"2025-12-29T14:20:16.481305202-05:00","closed_at":"2025-12-29T14:20:16.481305202-05:00","labels":["auth","test"],"dependencies":[{"issue_id":"lint-70d","depends_on_id":"lint-3dt","type":"blocks","created_at":"2025-12-29T14:15:24.226455282-05:00","created_by":"daemon"},{"issue_id":"lint-70d","depends_on_id":"lint-5qv","type":"parent-child","created_at":"2025-12-29T14:15:37.525925685-05:00","created_by":"daemon"}],"comments":[{"id":8,"issue_id":"lint-70d","author":"matsilva","text":"Starting - updating AuthenticatedDecoratorSuite","created_at":"2025-12-29T19:19:36Z"}]}
{"id":"lint-ayp","title":"Update Config.scala - remove jwtSecret from SupabaseConfig","description":"Remove jwtSecret field from SupabaseConfig and update loadSupabaseConfig()","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T14:15:06.769950645-05:00","updated_at":"2025-12-29T14:18:44.95083689-05:00","closed_at":"2025-12-29T14:18:44.95083689-05:00","labels":["auth"],"dependencies":[{"issue_id":"lint-ayp","depends_on_id":"lint-5qv","type":"parent-child","created_at":"2025-12-29T14:15:37.496424226-05:00","created_by":"daemon"}],"comments":[{"id":5,"issue_id":"lint-ayp","author":"matsilva","text":"Starting - removing jwtSecret from Config.scala","created_at":"2025-12-29T19:18:15Z"}]}
{"id":"lint-c5i","title":"Fix all linting issues detected by make lint","description":"","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-24T10:38:25.064597299-05:00","updated_at":"2025-12-24T13:49:13.331136325-05:00","closed_at":"2025-12-24T13:49:13.331136325-05:00"}
{"id":"lint-c5i.1","title":"Fix null usage in CompanyResolver.scala","description":"Replace 'if host == null then None' with 'Option(host).flatMap(...)' or similar safe wrapping.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-24T10:38:35.437335578-05:00","updated_at":"2025-12-24T13:49:08.58716261-05:00","closed_at":"2025-12-24T13:49:08.58716261-05:00","dependencies":[{"issue_id":"lint-c5i.1","depends_on_id":"lint-c5i","type":"parent-child","created_at":"2025-12-24T10:38:35.437859141-05:00","created_by":"daemon"}]}
{"id":"lint-c5i.2","title":"Fix exceptions in Config.scala and AuthConfig.scala","description":"Refactor methods to return 'Either[ConfigError, T]' instead of throwing 'ConfigError'. Update callers to handle the Either.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-24T10:38:35.451673961-05:00","updated_at":"2025-12-24T13:49:08.588123935-05:00","closed_at":"2025-12-24T13:49:08.588123935-05:00","dependencies":[{"issue_id":"lint-c5i.2","depends_on_id":"lint-c5i","type":"parent-child","created_at":"2025-12-24T10:38:35.452350553-05:00","created_by":"daemon"}]}
{"id":"lint-c5i.3","title":"Fix mutable state in JsonPathTraverser.scala","description":"Replace mutable 'var remaining' with a functional approach like 'foldLeft' or tail recursion.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-24T10:38:35.46763842-05:00","updated_at":"2025-12-24T13:49:08.589010676-05:00","closed_at":"2025-12-24T13:49:08.589010676-05:00","dependencies":[{"issue_id":"lint-c5i.3","depends_on_id":"lint-c5i","type":"parent-child","created_at":"2025-12-24T10:38:35.46806829-05:00","created_by":"daemon"}]}
{"id":"lint-c5i.4","title":"Fix exceptions in BaseStepSuite.scala","description":"For intentional throws (testing exception handling), add '// scalafix:ok'. For manual assertion failures, use 'assert(false, \"message\")'.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-24T10:38:35.481782935-05:00","updated_at":"2025-12-24T13:49:08.590040094-05:00","closed_at":"2025-12-24T13:49:08.590040094-05:00","dependencies":[{"issue_id":"lint-c5i.4","depends_on_id":"lint-c5i","type":"parent-child","created_at":"2025-12-24T10:38:35.482321136-05:00","created_by":"daemon"}]}
{"id":"lint-c5i.5","title":"Fix exceptions in ObjectStorageClientSuite.scala","description":"Replace 'throw new AssertionError' with 'assert(false, \"message\")'.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-24T10:38:35.49603565-05:00","updated_at":"2025-12-24T13:49:08.590856638-05:00","closed_at":"2025-12-24T13:49:08.590856638-05:00","dependencies":[{"issue_id":"lint-c5i.5","depends_on_id":"lint-c5i","type":"parent-child","created_at":"2025-12-24T10:38:35.496571076-05:00","created_by":"daemon"}]}
{"id":"lint-c5i.6","title":"Fix null and exceptions in ApiKeyValidatorSuite.scala","description":"Replace 'new HttpServerExchange(null)' with mock/stub or 'Option'. Replace 'throw AssertionError' with 'assert(false)'.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-24T10:38:35.511986413-05:00","updated_at":"2025-12-24T13:49:08.591644837-05:00","closed_at":"2025-12-24T13:49:08.591644837-05:00","dependencies":[{"issue_id":"lint-c5i.6","depends_on_id":"lint-c5i","type":"parent-child","created_at":"2025-12-24T10:38:35.512562198-05:00","created_by":"daemon"}]}
{"id":"lint-c5i.7","title":"Fix null, exceptions, and vars in AuthenticatedDecoratorSuite.scala","description":"Replace 'var' with immutable constructs. Replace 'new HttpServerExchange(null)' and 'throw AssertionError' as above.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-24T10:38:35.526882245-05:00","updated_at":"2025-12-24T13:49:08.59261527-05:00","closed_at":"2025-12-24T13:49:08.59261527-05:00","dependencies":[{"issue_id":"lint-c5i.7","depends_on_id":"lint-c5i","type":"parent-child","created_at":"2025-12-24T10:38:35.527448171-05:00","created_by":"daemon"}]}
{"id":"lint-c5i.8","title":"Fix exceptions in JwtValidatorSuite.scala","description":"Replace 'throw new AssertionError' with 'assert(false, \"message\")'.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-24T10:38:35.540760058-05:00","updated_at":"2025-12-24T13:49:08.593895074-05:00","closed_at":"2025-12-24T13:49:08.593895074-05:00","dependencies":[{"issue_id":"lint-c5i.8","depends_on_id":"lint-c5i","type":"parent-child","created_at":"2025-12-24T10:38:35.541333819-05:00","created_by":"daemon"}]}
{"id":"lint-fan","title":"Update AuthDecorators.scala - handle 503 status from JWT validation","description":"Update tryJwtAuth to pass through the statusCode from JwtValidationResult.Invalid (503 for JWKS unavailable)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T14:15:06.758890456-05:00","updated_at":"2025-12-29T14:18:15.819140205-05:00","closed_at":"2025-12-29T14:18:15.819140205-05:00","labels":["auth"],"dependencies":[{"issue_id":"lint-fan","depends_on_id":"lint-xco","type":"blocks","created_at":"2025-12-29T14:15:24.198122955-05:00","created_by":"daemon"},{"issue_id":"lint-fan","depends_on_id":"lint-5qv","type":"parent-child","created_at":"2025-12-29T14:15:37.486700044-05:00","created_by":"daemon"}],"comments":[{"id":4,"issue_id":"lint-fan","author":"matsilva","text":"Starting - updating AuthDecorators to handle 503 status","created_at":"2025-12-29T19:17:54Z"}]}
{"id":"lint-xco","title":"Rewrite JwtValidator.scala - ES256 validation using JWKS","description":"Rewrite JwtValidator to:\n- Take JwksProvider as constructor param (not jwt secret)\n- Use Algorithm.ECDSA256() for validation\n- Extract kid from token header to look up correct key\n- Reject non-ES256 algorithms\n- Return 503 status when JWKS unreachable","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T14:15:06.735051085-05:00","updated_at":"2025-12-29T14:17:34.288281529-05:00","closed_at":"2025-12-29T14:17:34.288281529-05:00","labels":["auth"],"dependencies":[{"issue_id":"lint-xco","depends_on_id":"lint-10k","type":"blocks","created_at":"2025-12-29T14:15:24.168374926-05:00","created_by":"daemon"},{"issue_id":"lint-xco","depends_on_id":"lint-5qv","type":"parent-child","created_at":"2025-12-29T14:15:37.466369629-05:00","created_by":"daemon"}],"comments":[{"id":2,"issue_id":"lint-xco","author":"matsilva","text":"Starting implementation - rewriting JwtValidator for ES256/JWKS","created_at":"2025-12-29T19:17:05Z"}]}
{"id":"lint-xeo","title":"Fix remaining test files that use jwtSecret","description":"Fix ApplicationLoaderSuite, JobLoaderSuite, StreamLoaderSuite - remove jwtSecret from SupabaseConfig","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T14:20:48.175560763-05:00","updated_at":"2025-12-29T14:24:20.489779331-05:00","closed_at":"2025-12-29T14:24:20.489779331-05:00","labels":["auth","test"],"comments":[{"id":9,"issue_id":"lint-xeo","author":"matsilva","text":"Fixing test files","created_at":"2025-12-29T19:20:54Z"}]}
