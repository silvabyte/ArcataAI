version = "3.8.5"

## Language
runner.dialect = scala3

## Alignment - minimal for cleaner diffs (per style guide: avoid aligning to opening paren)
align {
  preset = none
  openParenCallSite = false
  stripMargin = true
}
assumeStandardLibraryStripMargin = true

## Braces - per style guide rules
# "if without else: always use braces"
# "while: always use braces"
# Note: insertBraces and redundantBraces are mutually exclusive
# We choose to NOT insert braces automatically to match the style guide's
# preference for concise code when branches are single expressions

## Line length - per style guide: wrap long lines
maxColumn = 120
danglingParentheses {
  callSite = true
  defnSite = true
}

## Indentation - per style guide: 2 spaces per level
indent {
  main = 2
  defnSite = 2
  callSite = 2
  extendSite = 2
}

## Continuation indent - per style guide: indent continuation lines 2 spaces
continuationIndent {
  callSite = 2
  defnSite = 2
}

## Newlines & spacing - per style guide rules
newlines {
  source = keep
  # Space after control keywords: if (foo) not if(foo)
  beforeCurlyLambdaParams = multiline
  # Opening brace on same line as declaration
  alwaysBeforeElseAfterCurlyIf = false
  # Method with many arguments: each on own line
  implicitParamListModifierForce = [before, after]
}

## Spaces - per style guide
spaces {
  inImportCurlyBraces = false
  # Space after colon in type annotations
  afterKeywordBeforeParen = true
  beforeContextBoundColon = Never
}

## Scaladoc - per style guide: Javadoc or Scaladoc style
docstrings {
  style = Asterisk
  oneline = keep
  wrap = no
  blankFirstLine = yes
}

## Rewrite rules - enforce style guide patterns
rewrite {
  rules = [
    RedundantParens,
    SortModifiers,
    PreferCurlyFors
  ]
  # Per style guide: modifier order
  sortModifiers.order = [
    "override",
    "protected",
    "private",
    "implicit",
    "final",
    "sealed",
    "abstract",
    "lazy"
  ]
  # Per style guide: use curly braces for multi-generator for-comprehensions
  preferCurlyFors.removeTrailingSemicolonsOnly = false
}

## Trailing commas - modern style for cleaner diffs
trailingCommas = multiple

## Repo hygiene
project {
  git = true
  excludePaths = [
    "glob:**/target/**",
    "glob:**/out/**",
    "glob:**/node_modules/**",
    "glob:**/generated/**",
    "glob:**/*.generated.scala"
  ]
}

## File-specific tweaks
fileOverride {
  "glob:**/build.sc" { docstrings.style = keep }
}
