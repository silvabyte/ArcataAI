scalaVersion = "3.7.2"

# Rules that work in syntactic mode (no semantic analysis needed)
# These are all built into Scalafix
rules = [
  OrganizeImports,
  DisableSyntax
]

# Note: RemoveUnused requires semantic mode and is disabled for now
# To enable semantic rules, you would need to configure Scalafix with the compiler classpath

// OrganizeImports: Scala 3-friendly import grooming
// Per style guide: imports in standard order
OrganizeImports {
  removeUnused = false  # Requires semantic mode
  groupedImports = Merge
  importSelectorsOrder = Ascii
  groups = [
    "re:javax?\\."
    "re:scala\\."
    "arcata."
    "*"
  ]
}

// Guardrails - per style guide best practices
// DisableSyntax is a syntactic rule and catches violations at parse time
DisableSyntax {
  // Per style guide: prefer immutable values
  noVars = true
  // Per style guide: avoid nulls, use Option
  noNulls = true
  // Per style guide: use Either/Try instead of throwing
  noThrows = true
  // Per style guide: avoid return statements (prefer expression-based returns)
  noReturns = true
  // Per style guide: avoid while loops (prefer for-comprehensions/recursion)
  noWhileLoops = true
  // Per style guide: avoid finalize
  noFinalize = true
  // Per style guide: avoid xml literals
  noXml = true
  // Note: println is NOT checked via regex because:
  // 1. Log.scala needs println for the actual logging implementation
  // 2. Test files use println for skip messages
  // Instead, PR review should catch improper println usage
}
